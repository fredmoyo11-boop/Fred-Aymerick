<div class="header">
    <nav class="nav_buttons">
        <button mat-raised-button color="primary" [routerLink]="'/fahranfrage'">Fahranfrage</button>
        <button mat-raised-button color="accent" [routerLink]="'/aktiveFahranfrage'">Aktive Fahranfrage</button>
    </nav>
</div><br>
<div class="banner">
  <h2> FINDE EINE FAHRT </h2>
</div>
<div class="container">
    <form [formGroup]="fahranfrageForm" (ngSubmit)="submitRideRequest()">
        <!--start position options-->
        <div class="start">
            <p>
                <mat-icon>location_on</mat-icon>
                <label>Von</label></p>
            <br>
            <mat-form-field class="start-address-form-field">
                <mat-label>Startadresse/Startkoordinaten(lat,lng) eingeben</mat-label>
                <input type="text"
                       aria-label="address eingeben"
                       class='form-control'
                       matInput
                       formControlName="startAddress"
                       [value]="optionToString(fahranfrageForm.controls['startAddress'].value)"
                       [matAutocomplete]="auto_start">
                <button matTooltip="Aktuelle Position suchen" type="button" mat-icon-button matSuffix
                        (click)="currentLocation()">
                    <mat-icon>my_location</mat-icon>
                </button>
                <mat-autocomplete #auto_start="matAutocomplete"  [displayWith]="optionToString">
                  @for (option of filteredStartAddressOptions | async; track option) {
                    <mat-option [value]="option">{{ optionToString(option) }}</mat-option>
                  }

                </mat-autocomplete>
            </mat-form-field>
        </div>
        <!--target position options-->
        <div>
            <p>
                <mat-icon>location_on</mat-icon>
                <label>Nach</label>
            </p>
            <mat-form-field class="end-address-form-field">
                <mat-label>Zieladresse/Zielkoordinaten(lat,lng) eingeben</mat-label>
                <input type="text"
                       aria-label="zieladresse eingeben"
                       class='form-control'
                       matInput
                       formControlName="endAddress"
                       [value]="optionToString(fahranfrageForm.controls['endAddress'].value)"
                       [matAutocomplete]="auto_ziel">
                <mat-autocomplete #auto_ziel="matAutocomplete"  [displayWith]="optionToString">
                    @for (option of filteredEndAddressOptions| async ; track option) {
                        <mat-option [value]="option">{{ optionToString(option) }}</mat-option>
                    }
                </mat-autocomplete>
            </mat-form-field>
        </div>
        <div *ngIf="fahranfrageForm.hasError('sameAddress') && fahranfrageForm.touched" class="error"
             style="color: red;">
            Start- und Zieladresse müssen unterschiedlich sein.
        </div>
        <br><br>

        <!-- Vehicle class options -->
        <div class="vehicleClass">
            <label>F A H R Z E U G K L A S S E</label><br>
            <mat-radio-group class='form-control' formControlName="carType" aria-label="Select an option">
                <p>
                    <mat-radio-button value="klein"> K L E I N</mat-radio-button>
                </p>
                <p>
                    <mat-radio-button value="mittel">M I T T E L</mat-radio-button>
                </p>
                <p>
                    <mat-radio-button value="deluxe">D E L U X E</mat-radio-button>
                </p>
            </mat-radio-group>
        </div>

        <div class="note-box">
            <label for=" note-box"><strong>Bemerkung</strong>(optional)</label>
            <p>
                <mat-form-field class="bem-field">
                    <mat-label>Kommentar eingeben</mat-label>
                    <input type="text"
                           aria-label="Kommentare eingeben"
                           class='form-control'
                           matInput
                           formControlName="note" placeholder="Bsp.Seien Sie bitte pünktlich">
                </mat-form-field>
            </p>
        </div>


        <div class="search_button">
            <button type="submit" mat-raised-button [disabled]="!fahranfrageForm.valid" (click)="checkActiveRide()">
                FAHRT SUCHEN
            </button>
        </div>

    </form>
</div>
